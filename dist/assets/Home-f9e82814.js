import{u as A,m as x,r as v,M as $,i as P,a as C,c as R,f as m,b as z,d as F,p as K,v as D,e as G,g as Y,w as X,h as T,j as i,k as E,l as J}from"./index-f277bb89.js";import{B as Q,u as I,I as U,a as g}from"./api-82f9b4f5.js";function Z(e){const t=A(()=>x(e)),{isStatic:r}=v.useContext($);if(r){const[,s]=v.useState(e);v.useEffect(()=>t.on("change",s),[])}return t}const ee=e=>e&&typeof e=="object"&&e.mix,te=e=>ee(e)?e.mix:void 0;function se(...e){const t=!Array.isArray(e[0]),r=t?0:-1,s=e[0+r],n=e[1+r],o=e[2+r],l=e[3+r],c=P(n,o,{mixer:te(o[0]),...l});return t?c(s):c}function V(e,t){const r=Z(t()),s=()=>r.set(t());return s(),C(()=>{const n=()=>m.update(s,!1,!0),o=e.map(l=>l.on("change",n));return()=>{o.forEach(l=>l()),R(s)}}),r}function ne(e){z.current=[],e();const t=V(z.current,e);return z.current=void 0,t}function re(e,t,r,s){if(typeof e=="function")return ne(e);const n=typeof t=="function"?t:se(t,r,s);return Array.isArray(e)?k(e,n):k([e],([o])=>n(o))}function k(e,t){const r=A(()=>[]);return V(e,()=>{r.length=0;const s=e.length;for(let n=0;n<s;n++)r[n]=e[n].get();return t(r)})}function ie(e,t,r){var s;if(typeof e=="string"){let n=document;t&&(F(!!t.current),n=t.current),r?((s=r[e])!==null&&s!==void 0||(r[e]=n.querySelectorAll(e)),e=r[e]):e=n.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const b=new WeakMap;let h;function oe(e,t){if(t){const{inlineSize:r,blockSize:s}=t[0];return{width:r,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function le({target:e,contentRect:t,borderBoxSize:r}){var s;(s=b.get(e))===null||s===void 0||s.forEach(n=>{n({target:e,contentSize:t,get size(){return oe(e,r)}})})}function ae(e){e.forEach(le)}function ce(){typeof ResizeObserver>"u"||(h=new ResizeObserver(ae))}function de(e,t){h||ce();const r=ie(e);return r.forEach(s=>{let n=b.get(s);n||(n=new Set,b.set(s,n)),n.add(t),h==null||h.observe(s)}),()=>{r.forEach(s=>{const n=b.get(s);n==null||n.delete(t),n!=null&&n.size||h==null||h.unobserve(s)})}}const j=new Set;let y;function ue(){y=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};j.forEach(r=>r(t))},window.addEventListener("resize",y)}function fe(e){return j.add(e),y||ue(),()=>{j.delete(e),!j.size&&y&&(y=void 0)}}function he(e,t){return typeof e=="function"?fe(e):de(e,t)}const ge=50,B=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),pe=()=>({time:0,x:B(),y:B()}),xe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function W(e,t,r,s){const n=r[t],{length:o,position:l}=xe[t],c=n.current,d=r.time;n.current=e["scroll"+l],n.scrollLength=e["scroll"+o]-e["client"+o],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=K(0,n.scrollLength,n.current);const a=s-d;n.velocity=a>ge?0:D(n.current-c,a)}function me(e,t,r){W(e,"x",t,r),W(e,"y",t,r),t.time=r}function ve(e,t){const r={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)r.x+=s.offsetLeft,r.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const n=s.getBoundingClientRect();s=s.parentElement;const o=s.getBoundingClientRect();r.x+=n.left-o.left,r.y+=n.top-o.top}else if(s instanceof SVGGraphicsElement){const{x:n,y:o}=s.getBBox();r.x+=n,r.y+=o;let l=null,c=s.parentNode;for(;!l;)c.tagName==="svg"&&(l=c),c=s.parentNode;s=l}else break;return r}const ye={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},L={start:0,center:.5,end:1};function O(e,t,r=0){let s=0;if(L[e]!==void 0&&(e=L[e]),typeof e=="string"){const n=parseFloat(e);e.endsWith("px")?s=n:e.endsWith("%")?e=n/100:e.endsWith("vw")?s=n/100*document.documentElement.clientWidth:e.endsWith("vh")?s=n/100*document.documentElement.clientHeight:e=n}return typeof e=="number"&&(s=t*e),r+s}const we=[0,0];function be(e,t,r,s){let n=Array.isArray(e)?e:we,o=0,l=0;return typeof e=="number"?n=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?n=e.split(" "):n=[e,L[e]?e:"0"]),o=O(n[0],r,s),l=O(n[1],t),o-l}const je={x:0,y:0};function Ee(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ne(e,t,r){let{offset:s=ye.All}=r;const{target:n=e,axis:o="y"}=r,l=o==="y"?"height":"width",c=n!==e?ve(n,e):je,d=n===e?{width:e.scrollWidth,height:e.scrollHeight}:Ee(n),a={width:e.clientWidth,height:e.clientHeight};t[o].offset.length=0;let f=!t[o].interpolate;const N=s.length;for(let u=0;u<N;u++){const H=be(s[u],a[l],d[l],c[o]);!f&&H!==t[o].interpolatorOffsets[u]&&(f=!0),t[o].offset[u]=H}f&&(t[o].interpolate=P(t[o].offset,G(s)),t[o].interpolatorOffsets=[...t[o].offset]),t[o].progress=t[o].interpolate(t[o].current)}function ze(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)r.x.targetOffset+=s.offsetLeft,r.y.targetOffset+=s.offsetTop,s=s.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function Se(e,t,r,s={}){return{measure:()=>ze(e,s.target,r),update:n=>{me(e,r,n),(s.offset||s.target)&&Ne(e,r,s)},notify:()=>t(r)}}const p=new WeakMap,_=new WeakMap,S=new WeakMap,M=e=>e===document.documentElement?window:e;function Le(e,{container:t=document.documentElement,...r}={}){let s=S.get(t);s||(s=new Set,S.set(t,s));const n=pe(),o=Se(t,e,n,r);if(s.add(o),!p.has(t)){const c=()=>{for(const u of s)u.measure()},d=()=>{for(const u of s)u.update(Y.timestamp)},a=()=>{for(const u of s)u.notify()},f=()=>{m.read(c,!1,!0),m.read(d,!1,!0),m.update(a,!1,!0)};p.set(t,f);const N=M(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&_.set(t,he(t,f)),N.addEventListener("scroll",f,{passive:!0})}const l=p.get(t);return m.read(l,!1,!0),()=>{var c;R(l);const d=S.get(t);if(!d||(d.delete(o),d.size))return;const a=p.get(t);p.delete(t),a&&(M(t).removeEventListener("scroll",a),(c=_.get(t))===null||c===void 0||c(),window.removeEventListener("resize",a))}}function q(e,t){X(!!(!t||t.current))}const Ae=()=>({scrollX:x(0),scrollY:x(0),scrollXProgress:x(0),scrollYProgress:x(0)});function He({container:e,target:t,layoutEffect:r=!0,...s}={}){const n=A(Ae);return(r?C:v.useEffect)(()=>(q("target",t),q("container",e),Le(({x:l,y:c})=>{n.scrollX.set(l.current),n.scrollXProgress.set(l.progress),n.scrollY.set(c.current),n.scrollYProgress.set(c.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),n}const ke=({item:e})=>{const t=T();return e?i.jsxs("div",{className:"relative h-[85vh] w-full flex items-end justify-center pb-20 overflow-hidden group",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:`${Q}${e.backdrop_path}`,alt:e.title,className:"w-full h-full object-cover transition-transform duration-[20s] ease-linear group-hover:scale-110",fetchPriority:"high"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/40 to-transparent"}),i.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px]"})]}),i.jsxs("div",{className:"relative z-10 text-center max-w-4xl px-6 space-y-6",children:[i.jsxs(E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[i.jsx("span",{className:"inline-block py-1 px-3 rounded-full border border-white/20 bg-white/5 backdrop-blur-md text-xs font-medium text-white/80 mb-4 tracking-wider uppercase",children:"Spotlight Selection"}),i.jsx("h1",{className:"text-5xl md:text-8xl font-black tracking-tighter text-white drop-shadow-2xl mb-4 leading-[0.9]",children:e.title||e.name}),i.jsx("p",{className:"text-lg md:text-xl text-white/80 max-w-2xl mx-auto line-clamp-2 leading-relaxed",children:e.overview})]}),i.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},className:"flex items-center justify-center gap-4",children:[i.jsxs("button",{onClick:()=>t(`/watch/${e.media_type||"movie"}/${e.id}`),className:"px-8 py-4 bg-white text-black rounded-full font-bold text-lg hover:scale-105 transition-transform shadow-[0_0_40px_-10px_rgba(255,255,255,0.5)] flex items-center gap-2",children:[i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8 5v14l11-7z"})}),"Play Now"]}),i.jsx("button",{className:"px-8 py-4 bg-white/10 text-white border border-white/10 rounded-full font-bold text-lg hover:bg-white/20 transition-colors backdrop-blur-md",children:"Details"})]})]})]}):null},w=({title:e,queryKey:t,queryFn:r})=>{const s=T(),{data:n,isLoading:o}=I({queryKey:[t],queryFn:r}),l=v.useRef(null),{scrollYProgress:c}=He({target:l,offset:["start end","end start"]});if(re(c,[0,1],[100,-100]),o)return i.jsx("div",{className:"h-96 w-full flex items-center justify-center text-white/10 animate-pulse",children:"Loading Content..."});const d=(n==null?void 0:n.results)||[];return i.jsxs("section",{ref:l,className:"px-4 md:px-8 py-12 max-w-[1800px] mx-auto",children:[i.jsx(E.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"text-4xl md:text-5xl font-black mb-12 text-white/90 tracking-tighter",children:e}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 gap-y-12",children:d.map((a,f)=>a.poster_path&&i.jsxs(E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},whileHover:{y:-10,scale:1.02},transition:{duration:.4,delay:f*.05},viewport:{once:!0,margin:"50px"},className:"group cursor-pointer flex flex-col gap-3",onClick:()=>s(`/watch/${a.media_type||"movie"}/${a.id}`),children:[i.jsxs("div",{className:"relative aspect-[2/3] rounded-3xl overflow-hidden bg-white/5 shadow-2xl",children:[i.jsx("img",{src:`${U}${a.poster_path}`,alt:a.title,className:"w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-110",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{className:"px-2",children:[i.jsx("h3",{className:"font-bold text-lg leading-tight text-white/90 group-hover:text-white transition-colors line-clamp-1",children:a.title||a.name}),i.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/40 font-medium mt-1",children:[i.jsx("span",{children:(a.release_date||a.first_air_date||"").slice(0,4)}),i.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),i.jsx("span",{className:"capitalize",children:a.media_type||"Movie"})]})]})]},a.id))})]})},Oe=()=>{var n;const[e]=J(),t=e.get("q"),{data:r}=I({queryKey:["trending"],queryFn:g.getTrending}),s=(n=r==null?void 0:r.results)==null?void 0:n[0];return i.jsx("div",{className:"min-h-screen bg-[#0a0a0a] pb-32",children:t?i.jsx("div",{className:"pt-32",children:i.jsx(w,{title:`Results for "${t}"`,queryKey:`search-${t}`,queryFn:()=>g.search(t)})}):i.jsxs(i.Fragment,{children:[i.jsx(ke,{item:s}),i.jsxs("div",{className:"space-y-0 relative z-10",children:[i.jsx(w,{title:"Trending Now",queryKey:"trending",queryFn:g.getTrending}),i.jsx(w,{title:"Top Rated",queryKey:"topRated",queryFn:g.getTopRated}),i.jsx(w,{title:"Action Collection",queryKey:"action",queryFn:g.getActionMovies})]})]})})};export{Oe as default};
