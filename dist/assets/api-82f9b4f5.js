var at=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var i=(e,t,s)=>(at(e,t,"read from private field"),s?s.call(e):t.get(e)),c=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},u=(e,t,s,r)=>(at(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s);var l=(e,t,s)=>(at(e,t,"access private method"),s);import{S as Ut,o as Et,q as y,s as ot,t as Y,x as ht,y as ct,z as It,A as Ft,B as et,C as Nt,D as Pt,E as Ct,F as xt,r as C,G as _t,H as Bt}from"./index-f277bb89.js";var g,n,W,b,x,N,I,O,z,P,B,_,Q,M,A,D,L,J,ut,H,lt,Z,dt,$,ft,G,pt,V,bt,K,gt,st,Qt,Tt,At=(Tt=class extends Ut{constructor(t,s){super();c(this,D);c(this,J);c(this,H);c(this,Z);c(this,$);c(this,G);c(this,V);c(this,K);c(this,st);c(this,g,void 0);c(this,n,void 0);c(this,W,void 0);c(this,b,void 0);c(this,x,void 0);c(this,N,void 0);c(this,I,void 0);c(this,O,void 0);c(this,z,void 0);c(this,P,void 0);c(this,B,void 0);c(this,_,void 0);c(this,Q,void 0);c(this,M,void 0);c(this,A,new Set);this.options=s,u(this,g,t),u(this,O,null),u(this,I,Et()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,n).addObserver(this),Ot(i(this,n),this.options)?l(this,D,L).call(this):this.updateResult(),l(this,$,ft).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mt(i(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mt(i(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,G,pt).call(this),l(this,V,bt).call(this),i(this,n).removeObserver(this)}setOptions(t){const s=this.options,r=i(this,n);if(this.options=i(this,g).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof y(this.options.enabled,i(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");l(this,K,gt).call(this),i(this,n).setOptions(this.options),s._defaulted&&!ot(this.options,s)&&i(this,g).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,n),observer:this});const a=this.hasListeners();a&&Mt(i(this,n),r,this.options,s)&&l(this,D,L).call(this),this.updateResult(),a&&(i(this,n)!==r||y(this.options.enabled,i(this,n))!==y(s.enabled,i(this,n))||Y(this.options.staleTime,i(this,n))!==Y(s.staleTime,i(this,n)))&&l(this,J,ut).call(this);const o=l(this,H,lt).call(this);a&&(i(this,n)!==r||y(this.options.enabled,i(this,n))!==y(s.enabled,i(this,n))||o!==i(this,M))&&l(this,Z,dt).call(this,o)}getOptimisticResult(t){const s=i(this,g).getQueryCache().build(i(this,g),t),r=this.createResult(s,t);return kt(this,r)&&(u(this,b,r),u(this,N,this.options),u(this,x,i(this,n).state)),r}getCurrentResult(){return i(this,b)}trackResult(t,s){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),s==null||s(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&i(this,I).status==="pending"&&i(this,I).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(t){i(this,A).add(t)}getCurrentQuery(){return i(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=i(this,g).defaultQueryOptions(t),r=i(this,g).getQueryCache().build(i(this,g),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return l(this,D,L).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,b)))}createResult(t,s){var St;const r=i(this,n),a=this.options,o=i(this,b),h=i(this,x),v=i(this,N),p=t!==r?t.state:i(this,W),{state:S}=t;let d={...S},w=!1,f;if(s._optimisticResults){const R=this.hasListeners(),q=!R&&Ot(t,s),F=R&&Mt(t,r,s,a);(q||F)&&(d={...d,...Pt(S.data,t.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:T,errorUpdatedAt:j,status:m}=d;f=d.data;let X=!1;if(s.placeholderData!==void 0&&f===void 0&&m==="pending"){let R;o!=null&&o.isPlaceholderData&&s.placeholderData===(v==null?void 0:v.placeholderData)?(R=o.data,X=!0):R=typeof s.placeholderData=="function"?s.placeholderData((St=i(this,B))==null?void 0:St.state.data,i(this,B)):s.placeholderData,R!==void 0&&(m="success",f=Ct(o==null?void 0:o.data,R,s),w=!0)}if(s.select&&f!==void 0&&!X)if(o&&f===(h==null?void 0:h.data)&&s.select===i(this,z))f=i(this,P);else try{u(this,z,s.select),f=s.select(f),f=Ct(o==null?void 0:o.data,f,s),u(this,P,f),u(this,O,null)}catch(R){u(this,O,R)}i(this,O)&&(T=i(this,O),f=i(this,P),j=Date.now(),m="error");const it=d.fetchStatus==="fetching",rt=m==="pending",nt=m==="error",vt=rt&&it,yt=f!==void 0,E={status:m,fetchStatus:d.fetchStatus,isPending:rt,isSuccess:m==="success",isError:nt,isInitialLoading:vt,isLoading:vt,data:f,dataUpdatedAt:d.dataUpdatedAt,error:T,errorUpdatedAt:j,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>p.dataUpdateCount||d.errorUpdateCount>p.errorUpdateCount,isFetching:it,isRefetching:it&&!rt,isLoadingError:nt&&!yt,isPaused:d.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:nt&&yt,isStale:Rt(t,s),refetch:this.refetch,promise:i(this,I),isEnabled:y(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=tt=>{E.status==="error"?tt.reject(E.error):E.data!==void 0&&tt.resolve(E.data)},q=()=>{const tt=u(this,I,E.promise=Et());R(tt)},F=i(this,I);switch(F.status){case"pending":t.queryHash===r.queryHash&&R(F);break;case"fulfilled":(E.status==="error"||E.data!==F.value)&&q();break;case"rejected":(E.status!=="error"||E.error!==F.reason)&&q();break}}return E}updateResult(){const t=i(this,b),s=this.createResult(i(this,n),this.options);if(u(this,x,i(this,n).state),u(this,N,this.options),i(this,x).data!==void 0&&u(this,B,i(this,n)),ot(s,t))return;u(this,b,s);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!i(this,A).size)return!0;const h=new Set(o??i(this,A));return this.options.throwOnError&&h.add("error"),Object.keys(i(this,b)).some(v=>{const U=v;return i(this,b)[U]!==t[U]&&h.has(U)})};l(this,st,Qt).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,$,ft).call(this)}},g=new WeakMap,n=new WeakMap,W=new WeakMap,b=new WeakMap,x=new WeakMap,N=new WeakMap,I=new WeakMap,O=new WeakMap,z=new WeakMap,P=new WeakMap,B=new WeakMap,_=new WeakMap,Q=new WeakMap,M=new WeakMap,A=new WeakMap,D=new WeakSet,L=function(t){l(this,K,gt).call(this);let s=i(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(ht)),s},J=new WeakSet,ut=function(){l(this,G,pt).call(this);const t=Y(this.options.staleTime,i(this,n));if(ct||i(this,b).isStale||!It(t))return;const r=Ft(i(this,b).dataUpdatedAt,t)+1;u(this,_,et.setTimeout(()=>{i(this,b).isStale||this.updateResult()},r))},H=new WeakSet,lt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,n)):this.options.refetchInterval)??!1},Z=new WeakSet,dt=function(t){l(this,V,bt).call(this),u(this,M,t),!(ct||y(this.options.enabled,i(this,n))===!1||!It(i(this,M))||i(this,M)===0)&&u(this,Q,et.setInterval(()=>{(this.options.refetchIntervalInBackground||Nt.isFocused())&&l(this,D,L).call(this)},i(this,M)))},$=new WeakSet,ft=function(){l(this,J,ut).call(this),l(this,Z,dt).call(this,l(this,H,lt).call(this))},G=new WeakSet,pt=function(){i(this,_)&&(et.clearTimeout(i(this,_)),u(this,_,void 0))},V=new WeakSet,bt=function(){i(this,Q)&&(et.clearInterval(i(this,Q)),u(this,Q,void 0))},K=new WeakSet,gt=function(){const t=i(this,g).getQueryCache().build(i(this,g),this.options);if(t===i(this,n))return;const s=i(this,n);u(this,n,t),u(this,W,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},st=new WeakSet,Qt=function(t){xt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(i(this,b))}),i(this,g).getQueryCache().notify({query:i(this,n),type:"observerResultsUpdated"})})},Tt);function jt(e,t){return y(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ot(e,t){return jt(e,t)||e.state.data!==void 0&&mt(e,t,t.refetchOnMount)}function mt(e,t,s){if(y(t.enabled,e)!==!1&&Y(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Rt(e,t)}return!1}function Mt(e,t,s,r){return(e!==t||y(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Rt(e,s)}function Rt(e,t){return y(t.enabled,e)!==!1&&e.isStaleByTime(Y(t.staleTime,e))}function kt(e,t){return!ot(e.getCurrentResult(),t)}var Dt=C.createContext(!1),Lt=()=>C.useContext(Dt);Dt.Provider;function Yt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Wt=C.createContext(Yt()),zt=()=>C.useContext(Wt),Jt=(e,t,s)=>{const r=s!=null&&s.state.error&&typeof e.throwOnError=="function"?_t(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},Ht=e=>{C.useEffect(()=>{e.clearReset()},[e])},Zt=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||_t(s,[e.error,r])),$t=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Gt=(e,t)=>e.isLoading&&e.isFetching&&!t,Vt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,wt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Kt(e,t,s){var w,f,T,j;const r=Lt(),a=zt(),o=Bt(s),h=o.defaultQueryOptions(e);(f=(w=o.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||f.call(w,h);const v=o.getQueryCache().get(h.queryHash);h._optimisticResults=r?"isRestoring":"optimistic",$t(h),Jt(h,a,v),Ht(a);const U=!o.getQueryCache().get(h.queryHash),[p]=C.useState(()=>new t(o,h)),S=p.getOptimisticResult(h),d=!r&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(m=>{const X=d?p.subscribe(xt.batchCalls(m)):ht;return p.updateResult(),X},[p,d]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),C.useEffect(()=>{p.setOptions(h)},[h,p]),Vt(h,S))throw wt(h,p,a);if(Zt({result:S,errorResetBoundary:a,throwOnError:h.throwOnError,query:v,suspense:h.suspense}))throw S.error;if((j=(T=o.getDefaultOptions().queries)==null?void 0:T._experimental_afterQuery)==null||j.call(T,h,S),h.experimental_prefetchInRender&&!ct&&Gt(S,r)){const m=U?wt(h,p,a):v==null?void 0:v.promise;m==null||m.catch(ht).finally(()=>{p.updateResult()})}return h.notifyOnChangeProps?S:p.trackResult(S)}function ie(e,t){return Kt(e,At,t)}const Xt="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0MWRiNTg1MGZjYTY1ZDk4NDkxNzYxNjU4OWMxMzcyMiIsIm5iZiI6MTc1ODc0Mjk3Mi4wMTIsInN1YiI6IjY4ZDQ0OWJiY2FiYmYxM2NkYTcxOWNmYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.y_wbEycxapRlawH-g4BwjBMpeD7Xnb7BFCHmMLuW2ZY",qt="https://api.themoviedb.org/3",re="https://image.tmdb.org/t/p/w500",ne="https://image.tmdb.org/t/p/original",k=async e=>{const t=await fetch(`${qt}${e}`,{headers:{Authorization:`Bearer ${Xt}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Network response was not ok");return t.json()},ae={getTrending:()=>k("/trending/all/day"),getTopRated:()=>k("/movie/top_rated"),getActionMovies:()=>k("/discover/movie?with_genres=28"),getDetails:(e,t)=>k(`/${e}/${t}`),search:e=>k(`/search/multi?query=${encodeURIComponent(e)}`)};export{ne as B,re as I,ae as a,ie as u};
