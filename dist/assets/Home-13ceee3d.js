import{u as _,r as h,j as e,m as u,A as S,a as F}from"./index-ba056f57.js";import{u as L,a as T,b as C,B as $,c as o,d as A,N as K,M as l}from"./MasonryGrid-5a2b903f.js";const B=({item:t})=>{const c=_(),{scrollY:r}=L(),s=T(r,[0,500],[0,200]),p=T(r,[0,400],[1,0]),{addToWatchlist:b,removeFromWatchlist:d,isInWatchlist:f}=C(),[x,y]=h.useState(null),[n,m]=h.useState(!1),[i,a]=h.useState(!0),v=h.useRef(null);if(h.useEffect(()=>{let w;return t&&(y(null),m(!1),(async()=>{var k;try{const M=(k=(await o.getVideos(t.media_type||"movie",t.id)).results)==null?void 0:k.find(j=>j.site==="YouTube"&&(j.type==="Trailer"||j.type==="Teaser"));M&&(y(M.key),w=setTimeout(()=>m(!0),2500))}catch(N){console.error("Failed to fetch trailer",N)}})()),()=>clearTimeout(w)},[t]),!t)return null;const g=f(t.id),q=()=>{if(v.current){const w=i?"unMute":"mute";v.current.contentWindow.postMessage(JSON.stringify({event:"command",func:w,args:[]}),"*"),a(!i)}};return e.jsxs("div",{className:"relative h-[85vh] w-full flex items-end justify-center pb-20 overflow-hidden group bg-black",children:[e.jsxs(u.div,{style:{y:s,opacity:p},className:"absolute inset-0 z-0",children:[e.jsx("img",{src:`${$}${t.backdrop_path}`,alt:t.title,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${n?"opacity-0":"opacity-100"}`,fetchPriority:"high"}),e.jsx(S,{children:n&&x&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 w-full h-full pointer-events-none scale-125",children:e.jsx("iframe",{ref:v,src:`https://www.youtube.com/embed/${x}?autoplay=1&mute=1&controls=0&loop=1&playlist=${x}&showinfo=0&rel=0&iv_load_policy=3&disablekb=1&modestbranding=1&enablejsapi=1`,className:"w-full h-full object-cover",allow:"autoplay; encrypted-media",title:"Hero Trailer"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:"relative z-10 text-center max-w-4xl px-6 space-y-6",children:[e.jsxs(u.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[e.jsx("span",{className:"inline-block py-1 px-3 rounded-full border border-white/20 bg-white/5 backdrop-blur-md text-[10px] md:text-xs font-medium text-white/80 mb-3 md:mb-4 tracking-wider uppercase",children:"Spotlight Selection"}),e.jsx("h1",{className:"text-3xl sm:text-5xl md:text-6xl lg:text-8xl font-black tracking-tighter text-white drop-shadow-2xl mb-4 leading-[0.95] md:leading-[0.9]",children:t.title||t.name}),e.jsx("p",{className:"text-sm sm:text-lg md:text-xl text-white/80 max-w-2xl mx-auto line-clamp-3 md:line-clamp-2 leading-relaxed px-4 md:px-0",children:t.overview})]}),e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},className:"flex flex-col sm:flex-row items-center justify-center gap-4 pt-2",children:[e.jsxs("button",{onClick:()=>c(`/watch/${t.media_type||"movie"}/${t.id}`),className:"w-full sm:w-auto px-8 py-3 md:py-4 bg-white text-black rounded-full font-bold text-base md:text-lg hover:scale-105 transition-transform shadow-[0_0_40px_-10px_rgba(255,255,255,0.5)] flex items-center justify-center gap-2",children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),"Play Now"]}),e.jsxs("button",{className:`w-full sm:w-auto px-8 py-3 md:py-4 rounded-full font-bold text-base md:text-lg transition-colors backdrop-blur-md flex items-center justify-center gap-2 ${g?"bg-white/20 text-white border border-white/20":"bg-white/10 text-white hover:bg-white/20 border border-transparent"}`,onClick:()=>g?d(t.id):b(t),children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:g?e.jsx("polyline",{points:"20 6 9 17 4 12"}):e.jsx("path",{d:"M12 5v14M5 12h14"})}),e.jsx("span",{children:g?"Added":"My List"})]})]})]}),n&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute bottom-8 right-8 z-20 hidden md:block",children:e.jsx("button",{onClick:q,className:"w-12 h-12 rounded-full border border-white/20 bg-black/30 backdrop-blur-md flex items-center justify-center text-white hover:bg-white hover:text-black transition-all duration-300 group","aria-label":i?"Unmute":"Mute",children:i?e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})})})]})},P=()=>{var i;const[t,c]=F(),r=t.get("q"),s=t.get("genre"),p=t.get("name"),{watchlist:b}=C(),{data:d,isError:f,refetch:x}=A({queryKey:["trending"],queryFn:o.getTrending,retry:1}),y=(i=d==null?void 0:d.results)==null?void 0:i[0],n=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:27,name:"Horror"},{id:878,name:"Sci-Fi"},{id:53,name:"Thriller"}],m=a=>{s===String(a.id)?c({}):c({genre:a.id,name:a.name})};return e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] pb-32",children:!r&&!s?e.jsxs(e.Fragment,{children:[f?e.jsx("div",{className:"pt-20 px-4",children:e.jsx(K,{onRetry:x})}):e.jsx(B,{item:y}),e.jsx("div",{className:"sticky top-0 z-40 py-4 mb-12 bg-[#0a0a0a]/90 backdrop-blur-xl overflow-x-auto no-scrollbar px-4 md:px-8 flex gap-3 -mx-4 md:mx-0 shadow-2xl transition-all duration-300",children:n.map(a=>e.jsx("button",{onClick:()=>m(a),className:"whitespace-nowrap px-4 py-2 md:px-6 md:py-2.5 rounded-full text-xs md:text-sm font-semibold tracking-wide transition-all border border-white/5 bg-white/5 hover:bg-white text-white/60 hover:text-black hover:scale-105 active:scale-95 shadow-sm hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] flex-shrink-0",children:a.name},a.id))}),e.jsxs("div",{className:"space-y-16 relative z-10 pb-20",children:[b.length>0&&e.jsx(l,{title:"My List",queryKey:"watchlist",queryFn:()=>Promise.resolve({results:b})}),e.jsx(l,{title:"Trending Now",queryKey:"trending",queryFn:o.getTrending}),e.jsx(l,{title:"Top Rated",queryKey:"topRated",queryFn:o.getTopRated}),e.jsx(l,{title:"Action Collection",queryKey:"action",queryFn:o.getActionMovies})]})]}):s?e.jsxs("div",{className:"pt-32",children:[e.jsxs("div",{className:"px-4 md:px-8 mb-4 flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>c({}),className:"text-white/50 hover:text-white transition-colors flex items-center gap-2 group",children:[e.jsx("span",{className:"group-hover:-translate-x-1 transition-transform",children:"â†"})," Back"]}),e.jsxs("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter text-white",children:[p," Movies"]})]}),e.jsx("div",{className:"py-4 mb-8 overflow-x-auto no-scrollbar px-4 md:px-8 flex gap-3",children:n.map(a=>e.jsx("button",{onClick:()=>m(a),className:`whitespace-nowrap px-6 py-2.5 rounded-full text-sm font-semibold tracking-wide transition-all border ${s===String(a.id)?"bg-white text-black border-white shadow-[0_0_20px_rgba(255,255,255,0.3)]":"border-white/5 bg-white/5 hover:bg-white/10 text-white/60 hover:text-white"}`,children:a.name},a.id))}),e.jsx(l,{title:`Top ${p}`,queryKey:`genre-${s}`,queryFn:()=>o.getByGenre(s)})]}):e.jsx("div",{className:"pt-32",children:e.jsx(l,{title:`Results for "${r}"`,queryKey:`search-${r}`,queryFn:()=>o.search(r)})})})};export{P as default};
