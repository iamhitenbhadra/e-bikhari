import{u as A,m as p,r as m,M as $,i as T,a as I,c as P,f as x,b as N,d as F,p as K,v as D,e as G,g as Y,w as X,h as R,j as o,B as J,k as j,I as Q,l as y}from"./index-2db89e46.js";import{u as V}from"./useQuery-3ba70b76.js";function U(e){const t=A(()=>p(e)),{isStatic:r}=m.useContext($);if(r){const[,s]=m.useState(e);m.useEffect(()=>t.on("change",s),[])}return t}const Z=e=>e&&typeof e=="object"&&e.mix,ee=e=>Z(e)?e.mix:void 0;function te(...e){const t=!Array.isArray(e[0]),r=t?0:-1,s=e[0+r],n=e[1+r],i=e[2+r],l=e[3+r],c=T(n,i,{mixer:ee(i[0]),...l});return t?c(s):c}function q(e,t){const r=U(t()),s=()=>r.set(t());return s(),I(()=>{const n=()=>x.update(s,!1,!0),i=e.map(l=>l.on("change",n));return()=>{i.forEach(l=>l()),P(s)}}),r}function se(e){N.current=[],e();const t=q(N.current,e);return N.current=void 0,t}function ne(e,t,r,s){if(typeof e=="function")return se(e);const n=typeof t=="function"?t:te(t,r,s);return Array.isArray(e)?k(e,n):k([e],([i])=>n(i))}function k(e,t){const r=A(()=>[]);return q(e,()=>{r.length=0;const s=e.length;for(let n=0;n<s;n++)r[n]=e[n].get();return t(r)})}function re(e,t,r){var s;if(typeof e=="string"){let n=document;t&&(F(!!t.current),n=t.current),r?((s=r[e])!==null&&s!==void 0||(r[e]=n.querySelectorAll(e)),e=r[e]):e=n.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const w=new WeakMap;let h;function ie(e,t){if(t){const{inlineSize:r,blockSize:s}=t[0];return{width:r,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function oe({target:e,contentRect:t,borderBoxSize:r}){var s;(s=w.get(e))===null||s===void 0||s.forEach(n=>{n({target:e,contentSize:t,get size(){return ie(e,r)}})})}function le(e){e.forEach(oe)}function ae(){typeof ResizeObserver>"u"||(h=new ResizeObserver(le))}function ce(e,t){h||ae();const r=re(e);return r.forEach(s=>{let n=w.get(s);n||(n=new Set,w.set(s,n)),n.add(t),h==null||h.observe(s)}),()=>{r.forEach(s=>{const n=w.get(s);n==null||n.delete(t),n!=null&&n.size||h==null||h.unobserve(s)})}}const b=new Set;let v;function de(){v=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};b.forEach(r=>r(t))},window.addEventListener("resize",v)}function ue(e){return b.add(e),v||de(),()=>{b.delete(e),!b.size&&v&&(v=void 0)}}function fe(e,t){return typeof e=="function"?ue(e):ce(e,t)}const he=50,B=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),ge=()=>({time:0,x:B(),y:B()}),pe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function W(e,t,r,s){const n=r[t],{length:i,position:l}=pe[t],c=n.current,d=r.time;n.current=e["scroll"+l],n.scrollLength=e["scroll"+i]-e["client"+i],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=K(0,n.scrollLength,n.current);const a=s-d;n.velocity=a>he?0:D(n.current-c,a)}function xe(e,t,r){W(e,"x",t,r),W(e,"y",t,r),t.time=r}function me(e,t){const r={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)r.x+=s.offsetLeft,r.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const n=s.getBoundingClientRect();s=s.parentElement;const i=s.getBoundingClientRect();r.x+=n.left-i.left,r.y+=n.top-i.top}else if(s instanceof SVGGraphicsElement){const{x:n,y:i}=s.getBBox();r.x+=n,r.y+=i;let l=null,c=s.parentNode;for(;!l;)c.tagName==="svg"&&(l=c),c=s.parentNode;s=l}else break;return r}const ve={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},S={start:0,center:.5,end:1};function O(e,t,r=0){let s=0;if(S[e]!==void 0&&(e=S[e]),typeof e=="string"){const n=parseFloat(e);e.endsWith("px")?s=n:e.endsWith("%")?e=n/100:e.endsWith("vw")?s=n/100*document.documentElement.clientWidth:e.endsWith("vh")?s=n/100*document.documentElement.clientHeight:e=n}return typeof e=="number"&&(s=t*e),r+s}const ye=[0,0];function we(e,t,r,s){let n=Array.isArray(e)?e:ye,i=0,l=0;return typeof e=="number"?n=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?n=e.split(" "):n=[e,S[e]?e:"0"]),i=O(n[0],r,s),l=O(n[1],t),i-l}const be={x:0,y:0};function je(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ee(e,t,r){let{offset:s=ve.All}=r;const{target:n=e,axis:i="y"}=r,l=i==="y"?"height":"width",c=n!==e?me(n,e):be,d=n===e?{width:e.scrollWidth,height:e.scrollHeight}:je(n),a={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let f=!t[i].interpolate;const E=s.length;for(let u=0;u<E;u++){const H=we(s[u],a[l],d[l],c[i]);!f&&H!==t[i].interpolatorOffsets[u]&&(f=!0),t[i].offset[u]=H}f&&(t[i].interpolate=T(t[i].offset,G(s)),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=t[i].interpolate(t[i].current)}function Ne(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)r.x.targetOffset+=s.offsetLeft,r.y.targetOffset+=s.offsetTop,s=s.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function ze(e,t,r,s={}){return{measure:()=>Ne(e,s.target,r),update:n=>{xe(e,r,n),(s.offset||s.target)&&Ee(e,r,s)},notify:()=>t(r)}}const g=new WeakMap,_=new WeakMap,z=new WeakMap,M=e=>e===document.documentElement?window:e;function Le(e,{container:t=document.documentElement,...r}={}){let s=z.get(t);s||(s=new Set,z.set(t,s));const n=ge(),i=ze(t,e,n,r);if(s.add(i),!g.has(t)){const c=()=>{for(const u of s)u.measure()},d=()=>{for(const u of s)u.update(Y.timestamp)},a=()=>{for(const u of s)u.notify()},f=()=>{x.read(c,!1,!0),x.read(d,!1,!0),x.update(a,!1,!0)};g.set(t,f);const E=M(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&_.set(t,fe(t,f)),E.addEventListener("scroll",f,{passive:!0})}const l=g.get(t);return x.read(l,!1,!0),()=>{var c;P(l);const d=z.get(t);if(!d||(d.delete(i),d.size))return;const a=g.get(t);g.delete(t),a&&(M(t).removeEventListener("scroll",a),(c=_.get(t))===null||c===void 0||c(),window.removeEventListener("resize",a))}}function C(e,t){X(!!(!t||t.current))}const Se=()=>({scrollX:p(0),scrollY:p(0),scrollXProgress:p(0),scrollYProgress:p(0)});function Ae({container:e,target:t,layoutEffect:r=!0,...s}={}){const n=A(Se);return(r?I:m.useEffect)(()=>(C("target",t),C("container",e),Le(({x:l,y:c})=>{n.scrollX.set(l.current),n.scrollXProgress.set(l.progress),n.scrollY.set(c.current),n.scrollYProgress.set(c.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),n}const He=({item:e})=>{const t=R();return e?o.jsxs("div",{className:"relative h-[85vh] w-full flex items-end justify-center pb-20 overflow-hidden group",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:`${J}${e.backdrop_path}`,alt:e.title,className:"w-full h-full object-cover transition-transform duration-[20s] ease-linear group-hover:scale-110",fetchPriority:"high"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/40 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px]"})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl px-6 space-y-6",children:[o.jsxs(j.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[o.jsx("span",{className:"inline-block py-1 px-3 rounded-full border border-white/20 bg-white/5 backdrop-blur-md text-xs font-medium text-white/80 mb-4 tracking-wider uppercase",children:"Spotlight Selection"}),o.jsx("h1",{className:"text-5xl md:text-8xl font-black tracking-tighter text-white drop-shadow-2xl mb-4 leading-[0.9]",children:e.title||e.name}),o.jsx("p",{className:"text-lg md:text-xl text-white/80 max-w-2xl mx-auto line-clamp-2 leading-relaxed",children:e.overview})]}),o.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},className:"flex items-center justify-center gap-4",children:[o.jsxs("button",{onClick:()=>t(`/watch/${e.media_type||"movie"}/${e.id}`),className:"px-8 py-4 bg-white text-black rounded-full font-bold text-lg hover:scale-105 transition-transform shadow-[0_0_40px_-10px_rgba(255,255,255,0.5)] flex items-center gap-2",children:[o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8 5v14l11-7z"})}),"Play Now"]}),o.jsx("button",{className:"px-8 py-4 bg-white/10 text-white border border-white/10 rounded-full font-bold text-lg hover:bg-white/20 transition-colors backdrop-blur-md",children:"Details"})]})]})]}):null},L=({title:e,queryKey:t,queryFn:r})=>{const s=R(),{data:n,isLoading:i}=V({queryKey:[t],queryFn:r}),l=m.useRef(null),{scrollYProgress:c}=Ae({target:l,offset:["start end","end start"]});if(ne(c,[0,1],[100,-100]),i)return o.jsx("div",{className:"h-96 w-full flex items-center justify-center text-white/10 animate-pulse",children:"Loading Content..."});const d=(n==null?void 0:n.results)||[];return o.jsxs("section",{ref:l,className:"px-4 md:px-8 py-12 max-w-[1800px] mx-auto",children:[o.jsx(j.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"text-4xl md:text-5xl font-black mb-12 text-white/90 tracking-tighter",children:e}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 gap-y-12",children:d.map((a,f)=>a.poster_path&&o.jsxs(j.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},whileHover:{y:-10,scale:1.02},transition:{duration:.4,delay:f*.05},viewport:{once:!0,margin:"50px"},className:"group cursor-pointer flex flex-col gap-3",onClick:()=>s(`/watch/${a.media_type||"movie"}/${a.id}`),children:[o.jsxs("div",{className:"relative aspect-[2/3] rounded-3xl overflow-hidden bg-white/5 shadow-2xl",children:[o.jsx("img",{src:`${Q}${a.poster_path}`,alt:a.title,className:"w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-110",loading:"lazy"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),o.jsxs("div",{className:"px-2",children:[o.jsx("h3",{className:"font-bold text-lg leading-tight text-white/90 group-hover:text-white transition-colors line-clamp-1",children:a.title||a.name}),o.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/40 font-medium mt-1",children:[o.jsx("span",{children:(a.release_date||a.first_air_date||"").slice(0,4)}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),o.jsx("span",{className:"capitalize",children:a.media_type||"Movie"})]})]})]},a.id))})]})},We=()=>{var r;const{data:e}=V({queryKey:["trending"],queryFn:y.getTrending}),t=(r=e==null?void 0:e.results)==null?void 0:r[0];return o.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] pb-32",children:[o.jsx(He,{item:t}),o.jsxs("div",{className:"space-y-0 relative z-10",children:[o.jsx(L,{title:"Trending Now",queryKey:"trending",queryFn:y.getTrending}),o.jsx(L,{title:"Top Rated",queryKey:"topRated",queryFn:y.getTopRated}),o.jsx(L,{title:"Action Collection",queryKey:"action",queryFn:y.getActionMovies})]})]})};export{We as default};
